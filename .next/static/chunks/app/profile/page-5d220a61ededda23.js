(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{3523:function(e,a,r){Promise.resolve().then(r.bind(r,9441))},9441:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return m}});var i=r(7437),l=r(2265),o=r(3303),t=r(3145),n=r(3949),s=["Afganist\xe1n","Albania","Alemania","Andorra","Angola","Antigua y Barbuda","Arabia Saud\xed","Argelia","Argentina","Armenia","Australia","Austria","Azerbaiy\xe1n","Bahamas","Banglad\xe9s","Barbados","Bar\xe9in","B\xe9lgica","Belice","Ben\xedn","Bielorrusia","Birmania","Bolivia","Bosnia y Herzegovina","Botsuana","Brasil","Brun\xe9i","Bulgaria","Burkina Faso","Burundi","But\xe1n","Cabo Verde","Camboya","Camer\xfan","Canad\xe1","Catar","Chad","Chile","China","Chipre","Colombia","Comoras","Corea del Norte","Corea del Sur","Costa de Marfil","Costa Rica","Croacia","Cuba","Dinamarca","Dominica","Ecuador","Egipto","El Salvador","Emiratos \xc1rabes Unidos","Eritrea","Eslovaquia","Eslovenia","Espa\xf1a","Estados Unidos","Estonia","Eswatini","Etiop\xeda","Filipinas","Finlandia","Fiyi","Francia","Gab\xf3n","Gambia","Georgia","Ghana","Granada","Grecia","Guatemala","Guinea","Guinea-Bis\xe1u","Guinea Ecuatorial","Guyana","Hait\xed","Honduras","Hungr\xeda","India","Indonesia","Irak","Ir\xe1n","Irlanda","Islandia","Islas Marshall","Islas Salom\xf3n","Israel","Italia","Jamaica","Jap\xf3n","Jordania","Kazajist\xe1n","Kenia","Kirguist\xe1n","Kiribati","Kuwait","Laos","Lesoto","Letonia","L\xedbano","Liberia","Libia","Liechtenstein","Lituania","Luxemburgo","Madagascar","Malasia","Malaui","Maldivas","Mal\xed","Malta","Marruecos","Mauricio","Mauritania","M\xe9xico","Micronesia","Moldavia","M\xf3naco","Mongolia","Montenegro","Mozambique","Namibia","Nauru","Nepal","Nicaragua","N\xedger","Nigeria","Noruega","Nueva Zelanda","Om\xe1n","Pa\xedses Bajos","Pakist\xe1n","Palaos","Palestina","Panam\xe1","Pap\xfaa Nueva Guinea","Paraguay","Per\xfa","Polonia","Portugal","Reino Unido","Rep\xfablica Centroafricana","Rep\xfablica Checa","Rep\xfablica del Congo","Rep\xfablica Democr\xe1tica del Congo","Rep\xfablica Dominicana","Ruanda","Rumania","Rusia","Samoa","San Crist\xf3bal y Nieves","San Marino","San Vicente y las Granadinas","Santa Luc\xeda","Santo Tom\xe9 y Pr\xedncipe","Senegal","Serbia","Seychelles","Sierra Leona","Singapur","Siria","Somalia","Sri Lanka","Sud\xe1frica","Sud\xe1n","Sud\xe1n del Sur","Suecia","Suiza","Surinam","Tailandia","Tanzania","Tayikist\xe1n","Timor Oriental","Togo","Tonga","Trinidad y Tobago","T\xfanez","Turkmenist\xe1n","Turqu\xeda","Tuvalu","Ucrania","Uganda","Uruguay","Uzbekist\xe1n","Vanuatu","Vaticano","Venezuela","Vietnam","Yemen","Yibuti","Zambia","Zimbabue"];function c(e){let{value:a,onChange:r,placeholder:o,className:t="",disabled:c=!1}=e,{t:d}=(0,n.$G)("common"),[u,m]=(0,l.useState)(!1),[p,b]=(0,l.useState)(""),[h,v]=(0,l.useState)(-1),g=(0,l.useRef)(null),x=(0,l.useRef)(null),f=s.filter(e=>e.toLowerCase().includes(p.toLowerCase()));(0,l.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&(m(!1),b(""),v(-1))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let j=e=>{r(e),m(!1),b(""),v(-1)},y=()=>{c||(m(!u),u||v(-1))};(0,l.useEffect)(()=>{if(h>=0&&u){let e=document.getElementById("country-option-".concat(h));e&&e.scrollIntoView({block:"nearest"})}},[h,u]);let N=o||d("misc.selectCountry","Selecciona un pa\xeds");return(0,i.jsxs)("div",{className:"relative ".concat(t),ref:g,children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{ref:x,type:"text",className:"\n            bg-neutral-900 border border-violet-700 rounded px-3 py-2 w-full text-white\n            ".concat(c?"cursor-not-allowed opacity-50":"cursor-pointer","\n            focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500\n            pr-10\n          "),value:u?p:a,onChange:e=>{b(e.target.value),v(-1),u||m(!0)},onKeyDown:e=>{if(!u){("Enter"===e.key||"ArrowDown"===e.key||"ArrowUp"===e.key)&&(e.preventDefault(),m(!0),v(0));return}switch(e.key){case"ArrowDown":e.preventDefault(),v(e=>e<f.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),v(e=>e>0?e-1:f.length-1);break;case"Enter":e.preventDefault(),h>=0&&h<f.length&&j(f[h]);break;case"Escape":var a;m(!1),b(""),v(-1),null===(a=x.current)||void 0===a||a.blur()}},onClick:y,placeholder:N,disabled:c,autoComplete:"off","aria-expanded":u,"aria-haspopup":"listbox","aria-controls":"country-listbox","aria-activedescendant":h>=0?"country-option-".concat(h):void 0,role:"combobox",title:"Selector de pa\xeds"}),(0,i.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:[a&&!c&&(0,i.jsx)("button",{type:"button",className:"text-gray-400 hover:text-white mr-1 p-1 rounded",onClick:()=>{r(""),b(""),m(!1),v(-1)},"aria-label":"Limpiar selecci\xf3n",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,i.jsx)("button",{type:"button",className:"text-gray-400 p-1 rounded ".concat(c?"cursor-not-allowed":"hover:text-white"),onClick:y,disabled:c,"aria-label":u?"Cerrar lista":"Abrir lista",children:(0,i.jsx)("svg",{className:"w-4 h-4 transform transition-transform duration-200 ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),"        "]})]}),u&&(0,i.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-neutral-800 border border-violet-700 rounded-md shadow-lg max-h-60 overflow-auto",children:f.length>0?(0,i.jsx)("ul",{id:"country-listbox",role:"listbox",className:"py-1",title:"Lista de pa\xedses",children:f.map((e,r)=>{let l=e===a;return(0,i.jsx)("li",{id:"country-option-".concat(r),className:"\n                      px-3 py-2 cursor-pointer text-white transition-colors duration-150\n                      ".concat(r===h?"bg-violet-600":"hover:bg-violet-700","\n                      ").concat(l?"bg-violet-800 font-semibold":"","\n                    "),onClick:()=>j(e),role:"option","aria-selected":l,title:e,children:e},e)})}):(0,i.jsx)("div",{className:"px-3 py-2 text-gray-400 text-center",children:"No se encontraron pa\xedses"})})]})}let d={id:"",user_id:"",username:"",email:"",avatar_url:"/logo.png",bio:"",real_name:"",location:"",birthdate:"",privacy:{real_name:!1,location:!1,birthdate:!1},preferences:{theme:"auto",language:"es",visibility:"public"},stats:{games_played:0,rooms_created:0}};function u(){var e,a,r,s,u,m;let{t:p,i18n:b}=(0,n.$G)(["profile","common"]),[h,v]=(0,l.useState)(d),[g,x]=(0,l.useState)(!1),[f,j]=(0,l.useState)(!0),[y,N]=(0,l.useState)(""),[w,C]=(0,l.useState)(""),[D,k]=(0,l.useState)(null),_=(0,l.useRef)(null);async function E(){N(""),C("");let e=h.bio&&h.bio.length>250?p("profile.form.validation.bioTooLong"):h.real_name&&h.real_name.length>50?p("profile.form.validation.realNameTooLong"):"";if(e){N(e);return}if(!D){N("Sesi\xf3n no v\xe1lida. Por favor, recarga la p\xe1gina.");return}j(!0);let a={email:h.email,bio:h.bio,real_name:h.real_name,location:h.location,birthdate:h.birthdate,privacy:h.privacy,preferences:h.preferences,avatar_url:h.avatar_url},{error:r}=await o.O.from("profiles").update(a).eq("id",D.id);r?N("Error al guardar el perfil: "+r.message):(C("\xa1Perfil actualizado con \xe9xito!"),x(!1)),j(!1)}async function S(e){if(console.log("\uD83C\uDFAF handleAvatarChange iniciado"),!D){console.error("❌ Usuario no autenticado"),N("Usuario no autenticado.");return}console.log("✅ Usuario autenticado:",D.id,D.email);let a=e.target.files&&e.target.files[0];if(!a){console.log("❌ No se seleccion\xf3 archivo");return}if(console.log("\uD83D\uDCC1 Archivo seleccionado:",{name:a.name,type:a.type,size:a.size,lastModified:a.lastModified}),a.size>2097152){console.error("❌ Archivo demasiado grande:",a.size),N("El archivo es demasiado grande (m\xe1ximo 2MB).");return}if(!a.type.startsWith("image/")){console.error("❌ Tipo de archivo no v\xe1lido:",a.type),N("Por favor selecciona una imagen v\xe1lida.");return}j(!0),N(""),C("");try{var r;let{data:{user:e},error:i}=await o.O.auth.getUser();if(i||!e){console.error("❌ Error de autenticaci\xf3n al verificar:",i),N("Error de autenticaci\xf3n. Por favor, inicia sesi\xf3n nuevamente."),j(!1);return}console.log("✅ Autenticaci\xf3n verificada:",e.id);let l=(null===(r=a.name.split(".").pop())||void 0===r?void 0:r.toLowerCase())||"jpg",t="".concat(D.id,"/avatar.").concat(l);console.log("\uD83D\uDCCD Iniciando subida de avatar para usuario:",D.id),console.log("\uD83D\uDCC1 Ruta de archivo:",t),console.log("\uD83D\uDDBC️ Tipo de archivo:",a.type),console.log("\uD83D\uDCCF Tama\xf1o de archivo:",a.size,"bytes"),console.log("\uD83D\uDD10 Usuario actual auth:",e.id),console.log("\uD83D\uDDD1️ Intentando eliminar archivo anterior...");let{error:n}=await o.O.storage.from("avatars").remove([t]);n?console.log("ℹ️ No se pudo eliminar archivo anterior (esto es normal):",n.message):console.log("✅ Archivo anterior eliminado exitosamente"),console.log("\uD83D\uDCE4 Iniciando subida de archivo..."),console.log("\uD83D\uDCE4 Bucket: avatars"),console.log("\uD83D\uDCE4 Ruta:",t),console.log("\uD83D\uDCE4 Opciones:",{cacheControl:"3600",upsert:!0});let{data:s,error:c}=await o.O.storage.from("avatars").upload(t,a,{cacheControl:"3600",upsert:!0});if(c){console.error("❌ Error detallado de subida:",{message:c.message,error:c,fullError:JSON.stringify(c,null,2)}),N("Error al subir avatar: ".concat(c.message,". Detalles: ").concat(JSON.stringify(c))),j(!1);return}console.log("✅ Subida exitosa:",s),console.log("\uD83D\uDD17 Obteniendo URL p\xfablica...");let{data:d}=o.O.storage.from("avatars").getPublicUrl(t);if(console.log("\uD83D\uDD17 Datos de URL p\xfablica:",d),!(null==d?void 0:d.publicUrl)){console.error("❌ No se pudo obtener URL p\xfablica"),N("No se pudo obtener la URL p\xfablica del avatar."),j(!1);return}let u=d.publicUrl;console.log("\uD83D\uDD17 Nueva URL del avatar:",u),console.log("\uD83D\uDCBE Actualizando perfil en base de datos...");let{error:m}=await o.O.from("profiles").update({avatar_url:u}).eq("id",D.id);m?(console.error("❌ Error al actualizar perfil:",m),N("Error al actualizar el avatar en el perfil: "+m.message)):(console.log("✅ Perfil actualizado exitosamente"),v(e=>({...e,avatar_url:u})),C("Avatar actualizado correctamente."))}catch(e){console.error("❌ Error inesperado en handleAvatarChange:",e),N("Error inesperado al subir el avatar.")}j(!1)}if((0,l.useEffect)(()=>{!async function(){var e,a,r,i,l,t,n;j(!0),N("");let{data:{user:s},error:c}=await o.O.auth.getUser();if(c||!s){N((null==c?void 0:c.message)||"No hay usuario logueado. Por favor, inicia sesi\xf3n."),j(!1);return}k(s);let{data:u,error:m}=await o.O.from("profiles").select("*").eq("id",s.id).single();if(m&&"PGRST116"!==m.code){N("Error al cargar el perfil: "+m.message),j(!1);return}if(u){v({...d,...u,username:u.username||(null===(e=s.user_metadata)||void 0===e?void 0:e.username)||(null===(a=s.email)||void 0===a?void 0:a.split("@")[0])||"Usuario",email:u.email||s.email||"",avatar_url:u.avatar_url||(null===(r=s.user_metadata)||void 0===r?void 0:r.avatar_url)||"/logo.png",privacy:u.privacy||d.privacy,preferences:u.preferences||d.preferences,stats:u.stats||d.stats});let l=(null===(i=u.preferences)||void 0===i?void 0:i.language)||"es";l!==b.language&&b.changeLanguage(l)}else{let e=(null===(l=s.user_metadata)||void 0===l?void 0:l.username)||(null===(t=s.email)||void 0===t?void 0:t.split("@")[0])||"user_".concat(s.id.substring(0,8)),a={...d,id:s.id,user_id:s.id,username:e,email:s.email||"",avatar_url:(null===(n=s.user_metadata)||void 0===n?void 0:n.avatar_url)||"/logo.png"};v(a);let{error:r}=await o.O.from("profiles").upsert(a);r?N("Error al crear el perfil inicial: "+r.message):C("Perfil inicial creado. \xa1Puedes editarlo!")}j(!1)}()},[b]),f&&!h.id)return(0,i.jsx)("div",{className:"bg-black text-white p-6 rounded-2xl border border-violet-600 animate-pulse",children:p("common:loading.profile")});if(y&&!h.id)return(0,i.jsxs)("div",{className:"bg-black text-red-500 p-6 rounded-2xl border border-red-600",children:["Error: ",y]});if(!D)return(0,i.jsx)("div",{className:"bg-black text-yellow-500 p-6 rounded-2xl border border-yellow-600",children:"Por favor, inicia sesi\xf3n para ver tu perfil."});let L={...h,username:h.username||(null===(e=D.user_metadata)||void 0===e?void 0:e.username)||(null===(a=D.email)||void 0===a?void 0:a.split("@")[0])||"Usuario",email:h.email||D.email||"",avatar_url:h.avatar_url||(null===(r=D.user_metadata)||void 0===r?void 0:r.avatar_url)||"/logo.png",stats:h.stats||d.stats,privacy:h.privacy||d.privacy,preferences:h.preferences||d.preferences},I=L.privacy,B=L.preferences,M=L.stats;return(0,i.jsxs)("div",{className:"bg-neutral-900 text-white p-6 rounded-2xl shadow-xl border border-violet-700 max-w-2xl w-full mx-auto my-8",children:[f&&(0,i.jsx)("div",{className:"absolute top-4 right-4 bg-blue-600 text-white p-2 rounded-md text-sm animate-pulse",children:"Guardando..."}),y&&(0,i.jsxs)("div",{className:"mb-4 p-3 bg-red-700 text-white rounded-md text-sm",children:["Error: ",y]}),w&&(0,i.jsxs)("div",{className:"mb-4 p-3 bg-green-700 text-white rounded-md text-sm",children:["\xc9xito: ",w]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-6 pb-6 border-b border-neutral-700",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(t.default,{src:L.avatar_url,alt:"Avatar de ".concat(L.username),width:96,height:96,className:"w-24 h-24 rounded-full border-2 border-violet-500 object-cover shadow-md transition-transform duration-300 group-hover:scale-105",priority:!1,sizes:"96px",onError:e=>{e.target.src="/logo.png"}}),g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/gif, image/webp",ref:_,className:"hidden",title:"Cambiar avatar","aria-label":"Cambiar avatar",onChange:S}),(0,i.jsx)("button",{type:"button",className:"absolute -bottom-2 -right-2 w-8 h-8 bg-violet-600 hover:bg-violet-500 text-white rounded-full flex items-center justify-center text-lg shadow-md transition-transform duration-300 hover:scale-110",onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},"aria-label":"Subir nuevo avatar",children:"\uD83D\uDCF7"})]})]}),(0,i.jsxs)("div",{className:"text-center sm:text-left",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-violet-400 truncate max-w-xs sm:max-w-md",title:L.username,children:L.username}),(0,i.jsx)("p",{className:"text-sm text-gray-400 truncate max-w-xs sm:max-w-md",title:L.email,children:L.email}),(0,i.jsxs)("div",{className:"flex items-center justify-center sm:justify-start space-x-2 mt-2",children:[(0,i.jsx)("span",{className:"w-3 h-3 rounded-full ".concat((null==D?void 0:D.id)?"bg-green-500 animate-pulse":"bg-gray-500")}),(0,i.jsx)("span",{className:"text-sm text-gray-300",children:(null==D?void 0:D.id)?"Online":"Offline"})]})]})]}),(0,i.jsxs)("div",{className:"mb-6 pb-6 border-b border-neutral-700",children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-2",children:p("profile.biography")}),g?(0,i.jsx)("textarea",{className:"bg-neutral-900 border border-violet-700 rounded px-3 py-2 w-full text-white resize-none",value:h.bio||"",maxLength:250,rows:3,onChange:e=>v(a=>({...a,bio:e.target.value})),placeholder:p("profile.biography_placeholder"),"aria-label":"Biograf\xeda"}):(0,i.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed min-h-[3rem]",children:h.bio||p("profile.no_biography")}),g&&(0,i.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(h.bio||"").length,"/250 ",p("profile.characters")]})]}),(0,i.jsxs)("div",{className:"mb-6 pb-6 border-b border-neutral-700 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"sm:ml-auto",children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.real_name")}),g?(0,i.jsx)("input",{className:"bg-neutral-900 border border-violet-700 rounded px-2 py-1 w-full text-white",value:h.real_name||"",maxLength:40,onChange:e=>v(a=>({...a,real_name:e.target.value})),placeholder:p("profile.real_name_placeholder"),"aria-label":"Nombre real"}):(0,i.jsx)("span",{children:I.real_name?h.real_name:p("profile.private")}),g&&(0,i.jsxs)("label",{className:"block text-xs mt-1",children:[(0,i.jsx)("input",{type:"checkbox",checked:I.real_name,onChange:e=>v(a=>({...a,privacy:{...I,real_name:e.target.checked}}))})," ",p("profile.show")]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.location")}),g?(0,i.jsx)(c,{value:h.location||"",onChange:e=>v(a=>({...a,location:e})),placeholder:p("profile.select_country"),className:"w-full"}):(0,i.jsx)("span",{children:I.location?h.location||p("profile.not_specified"):p("profile.private")}),g&&(0,i.jsxs)("label",{className:"block text-xs mt-1",children:[(0,i.jsx)("input",{type:"checkbox",checked:I.location,onChange:e=>v(a=>({...a,privacy:{...I,location:e.target.checked}}))})," ",p("profile.show")]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.birthdate")}),g?(0,i.jsx)("input",{type:"date",className:"bg-neutral-900 border border-violet-700 rounded px-2 py-1 w-full text-white",value:h.birthdate||"",onChange:e=>v(a=>({...a,birthdate:e.target.value})),placeholder:p("profile.birthdate_placeholder"),"aria-label":"Fecha de nacimiento"}):(0,i.jsx)("span",{children:I.birthdate?h.birthdate:p("profile.private")}),g&&(0,i.jsxs)("label",{className:"block text-xs mt-1",children:[(0,i.jsx)("input",{type:"checkbox",checked:I.birthdate,onChange:e=>v(a=>({...a,privacy:{...I,birthdate:e.target.checked}}))})," ",p("profile.show")]})]})]}),(0,i.jsxs)("div",{className:"mb-4 grid grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.theme")}),g?(0,i.jsxs)("select",{className:"bg-neutral-900 border border-violet-700 rounded px-2 py-1 w-full text-white",value:(null===(s=L.preferences)||void 0===s?void 0:s.theme)||"auto",onChange:e=>v(a=>({...a,preferences:{...B,theme:e.target.value}})),title:p("profile.select_theme"),children:[(0,i.jsx)("option",{value:"auto",children:p("profile.auto")}),(0,i.jsx)("option",{value:"light",children:p("profile.light")}),(0,i.jsx)("option",{value:"dark",children:p("profile.dark")})]}):(0,i.jsx)("span",{children:"auto"===B.theme?p("profile.auto"):"light"===B.theme?p("profile.light"):p("profile.dark")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.language")}),g?(0,i.jsxs)("select",{className:"bg-neutral-900 border border-violet-700 rounded px-2 py-1 w-full text-white",value:(null===(u=L.preferences)||void 0===u?void 0:u.language)||"es",onChange:e=>{var a;return a=e.target.value,void(v(e=>({...e,preferences:{...e.preferences,language:a}})),b.changeLanguage(a))},title:p("profile.select_language"),children:[(0,i.jsx)("option",{value:"es",children:p("profile.spanish")}),(0,i.jsx)("option",{value:"en",children:p("profile.english")})]}):(0,i.jsx)("span",{children:"es"===B.language?p("profile.spanish"):p("profile.english")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.visibility")}),g?(0,i.jsxs)("select",{className:"bg-neutral-900 border border-violet-700 rounded px-2 py-1 w-full text-white",value:(null===(m=L.preferences)||void 0===m?void 0:m.visibility)||"public",onChange:e=>v(a=>({...a,preferences:{...B,visibility:e.target.value}})),title:p("profile.select_visibility"),children:[(0,i.jsx)("option",{value:"public",children:p("profile.public")}),(0,i.jsx)("option",{value:"private",children:p("profile.private")})]}):(0,i.jsx)("span",{children:"public"===B.visibility?p("profile.public"):p("profile.private")})]})]}),(0,i.jsxs)("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.member_since")}),(0,i.jsx)("span",{children:h.created_at?new Date(h.created_at).toLocaleDateString():"-"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.last_connection")}),(0,i.jsx)("span",{children:h.last_seen?new Date(h.last_seen).toLocaleString():"-"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.rooms_created")}),(0,i.jsx)("span",{className:"font-semibold",children:M.rooms_created})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-violet-400 font-semibold mb-1",children:p("profile.games_played")}),(0,i.jsx)("span",{className:"font-semibold",children:M.games_played})]})]}),y&&(0,i.jsx)("div",{className:"text-red-400 mb-2",children:y}),w&&(0,i.jsx)("div",{className:"text-green-400 mb-2",children:w}),(0,i.jsx)("div",{className:"flex gap-2 mt-2",children:g?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-1 rounded-xl font-bold",onClick:E,disabled:f,children:p("profile.save")}),(0,i.jsx)("button",{className:"bg-neutral-800 hover:bg-neutral-700 text-white px-4 py-1 rounded-xl font-bold",onClick:()=>{x(!1),N(""),C("")},children:p("profile.cancel")})]}):(0,i.jsx)("button",{className:"bg-violet-600 hover:bg-violet-700 text-white px-4 py-1 rounded-xl font-bold",onClick:()=>x(!0),children:p("profile.edit")})})]})}function m(){let{t:e}=(0,n.$G)("profile");return(0,i.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-4 text-violet-400",children:e("profile.title")}),(0,i.jsx)(u,{})]})}},3303:function(e,a,r){"use strict";r.d(a,{O:function(){return i}});let i=(0,r(3288).eI)("https://hjgsgockrrnnprpddpsa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhqZ3Nnb2NrcnJubnBycGRkcHNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2OTM2MDIsImV4cCI6MjA2NDI2OTYwMn0.uVhGqEllYz-PmIiizI0DE35Ov0M8CtnurLZp_z2DKEU")}},function(e){e.O(0,[631,145,971,117,744],function(){return e(e.s=3523)}),_N_E=e.O()}]);