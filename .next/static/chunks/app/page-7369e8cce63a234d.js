(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9798:function(e,t,s){Promise.resolve().then(s.bind(s,7340))},7340:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(7437),r=s(2265),i=s(9376),a=s(1265),u=s(3145);function l(){let{user:e,loading:t}=(0,a.a)(),s=(0,i.useRouter)();return((0,r.useEffect)(()=>{t||(e?s.push("/dashboard"):s.push("/auth"))},[e,t,s]),t)?(0,n.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"w-full flex flex-col items-center justify-center mt-8 mb-4",children:(0,n.jsx)(u.default,{src:"/logo.png",alt:"GameGoUp Logo",width:320,height:320,priority:!0,className:"w-80 h-80 animate-pulse",sizes:"320px"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-300",children:"Iniciando GameGoUp..."})]})]}):(0,n.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"w-full flex flex-col items-center justify-center mt-8 mb-4",children:(0,n.jsx)(u.default,{src:"/logo.png",alt:"GameGoUp Logo",width:320,height:320,priority:!0,className:"w-80 h-80",sizes:"320px"})}),(0,n.jsx)("p",{className:"text-gray-300",children:"Redirigiendo..."})]})}},1265:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return c}});var n=s(7437),r=s(2265),i=s(3303),a=s(9376),u=s(3949);let l=(0,r.createContext)(void 0);function c(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function o(e){let{children:t}=e,{t:s}=(0,u.$G)("common"),[c,o]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0),m=(0,a.useRouter)(),f=(0,a.usePathname)(),x=["/auth"];(0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e},error:t}=await i.O.auth.getUser();t?(console.error("Error getting user:",t),o(null)):o(e)}catch(e){console.error("Error in getInitialUser:",e),o(null)}finally{h(!1)}})();let{data:{subscription:e}}=i.O.auth.onAuthStateChange(async(e,t)=>{var s,n;console.log("Auth state changed:",e,null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.id),"SIGNED_IN"===e||"TOKEN_REFRESHED"===e?(o(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null),("/auth"===f||"/"===f)&&m.push("/dashboard")):"SIGNED_OUT"===e&&(o(null),m.push("/auth")),h(!1)});return()=>{e.unsubscribe()}},[m,f]),(0,r.useEffect)(()=>{if(!d){let e=x.includes(f);c||e?c&&"/auth"===f?m.push("/dashboard"):c&&"/"===f&&m.push("/dashboard"):m.push("/auth")}},[c,d,f,m]);let p=async()=>{try{h(!0);let{error:e}=await i.O.auth.signOut();e&&console.error("Error signing out:",e)}catch(e){console.error("Error in signOut:",e)}finally{h(!1)}};return d?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-black",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-violet-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-white text-lg",children:s("loading.general")})]})}):c||x.includes(f)?(0,n.jsx)(l.Provider,{value:{user:c,loading:d,signOut:p},children:t}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-black",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("p",{className:"text-white text-lg",children:"Redirigiendo..."})})})}},3303:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});let n=(0,s(3288).eI)("https://hjgsgockrrnnprpddpsa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhqZ3Nnb2NrcnJubnBycGRkcHNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2OTM2MDIsImV4cCI6MjA2NDI2OTYwMn0.uVhGqEllYz-PmIiizI0DE35Ov0M8CtnurLZp_z2DKEU")},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[631,145,971,117,744],function(){return e(e.s=9798)}),_N_E=e.O()}]);