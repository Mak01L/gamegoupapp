(()=>{var e={};e.id=799,e.ids=[799],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},3408:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>m,routeModule:()=>x,tree:()=>c}),t(7824),t(1506),t(5866);var o=t(3191),r=t(8716),i=t(7922),a=t.n(i),n=t(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(s,l);let c=["",{children:["rooms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7824)),"D:\\gamer-chat-app\\app\\rooms\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"D:\\gamer-chat-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],m=["D:\\gamer-chat-app\\app\\rooms\\page.tsx"],d="/rooms/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new o.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/rooms/page",pathname:"/rooms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9764:(e,s,t)=>{Promise.resolve().then(t.bind(t,6049))},6049:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var o=t(326),r=t(7577),i=t(12),a=t(5472),n=t(5047);function l(){let{t:e}=(0,i.$G)(["rooms","common"]),[s,t]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[m,d]=(0,r.useState)(!0),[u,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[p,v]=(0,r.useState)(!1),[j,b]=(0,r.useState)({juego:"",regiones:[],idiomas:[],paises:[],sistemas:[],soloConUsuarios:!1,ordenarPor:"usuarios"}),D=(0,n.useRouter)(),f=async()=>{try{let e,s;console.log("\uD83D\uDD0D Cargando salas con conteo de usuarios...");let{data:o,error:r}=await a.O.from("rooms_with_user_count").select("*").order("active_users_count",{ascending:!1});if(!r&&o)e=o,s=null;else{console.log("⚠️ Vista no disponible, usando fallback...");let{data:t,error:o}=await a.O.from("rooms").select("*").order("created_at",{ascending:!1});if(o)throw o;e=await Promise.all(t.map(async e=>{let{data:s}=await a.O.from("room_users").select("is_active").eq("room_id",e.id),t=s?.filter(e=>e.is_active).length||0,o=s?.length||0;return{...e,active_users_count:t,total_users_count:o,room_status:0===t?"EMPTY":1===t?"SINGLE_USER":"ACTIVE"}})),s=null}if(console.log("\uD83D\uDCCA Resultado:",{data:e,error:s,rooms_found:e?.length}),s){console.error("❌ Error:",s);let e=s&&"object"==typeof s&&"message"in s?String(s.message):"Error desconocido";x(`Error al cargar salas: ${e}`)}else t(e||[])}catch(e){console.error("❌ Error inesperado:",e),x("Error inesperado al cargar las salas")}d(!1)},N=(e,s)=>{if("regiones"===e||"idiomas"===e||"paises"===e||"sistemas"===e){let t=j[e];b(o=>({...o,[e]:t.includes(s)?t.filter(e=>e!==s):[...t,s]}))}},y=(e,s)=>{switch(e){case"EMPTY":return"\uD83D\uDCA4";case"SINGLE_USER":return"\uD83D\uDC64";case"ACTIVE":return"\uD83D\uDD25";default:return"❓"}},_=e=>{switch(e){case"EMPTY":return"text-gray-500";case"SINGLE_USER":return"text-yellow-400";case"ACTIVE":return"text-green-400";default:return"text-gray-400"}};return m?(0,o.jsxs)("div",{className:"text-white text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-500 mx-auto mb-4"}),e("common:misc.loadingRooms")]}):u?o.jsx("div",{className:"text-red-400 text-center py-8",children:u}):(0,o.jsxs)("div",{className:"p-4 text-white max-w-6xl mx-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsxs)("h2",{className:"text-3xl font-bold text-violet-300",children:["\uD83D\uDD0D ",e("common:misc.exploreRooms")]}),(0,o.jsxs)("div",{className:"flex gap-3",children:[(0,o.jsxs)("button",{onClick:()=>v(!p),className:`px-4 py-2 rounded-xl text-sm transition-colors ${p?"bg-violet-600 text-white":"bg-violet-600/20 text-violet-300 hover:bg-violet-600/30"}`,children:["\uD83C\uDF9B️ ",e("common:misc.filters")]}),(0,o.jsxs)("button",{onClick:()=>{d(!0),f()},className:"px-4 py-2 bg-violet-600 hover:bg-violet-700 rounded-xl text-sm transition-colors",disabled:m,children:["\uD83D\uDD04 ",e("common:misc.refresh")]})]})]}),(0,o.jsxs)("div",{className:"mb-6",children:["        ",o.jsx("input",{type:"text",placeholder:e("common:misc.searchPlaceholder"),value:h,onChange:e=>g(e.target.value),className:"w-full bg-neutral-800 text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-violet-500 outline-none"})]}),p&&(0,o.jsxs)("div",{className:"bg-neutral-900/50 border border-violet-500 rounded-xl p-6 mb-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-violet-300 font-medium mb-2",children:["\uD83C\uDFAE ",e("common:misc.game")]}),(0,o.jsxs)("select",{value:j.juego,onChange:e=>b(s=>({...s,juego:e.target.value})),className:"w-full bg-neutral-800 text-white px-3 py-2 rounded-lg focus:ring-2 focus:ring-violet-500 outline-none",title:"Seleccionar juego","aria-label":"Filtrar por juego",children:[o.jsx("option",{value:"",children:e("common:misc.allGames")}),["Valorant","League of Legends","CS2","Overwatch 2","Apex Legends","Fortnite","Rocket League","FIFA 24","Call of Duty","Minecraft","Among Us","Fall Guys","Genshin Impact","Destiny 2","Rainbow Six Siege"].map(e=>o.jsx("option",{value:e,children:e},e))]})]}),"            ","            ",(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-violet-300 font-medium mb-2",children:["\uD83D\uDCCA ",e("common:misc.sortBy")]}),(0,o.jsxs)("select",{value:j.ordenarPor,onChange:e=>b(s=>({...s,ordenarPor:e.target.value})),className:"w-full bg-neutral-800 text-white px-3 py-2 rounded-lg focus:ring-2 focus:ring-violet-500 outline-none",title:"Ordenar salas por","aria-label":"Ordenar salas por criterio",children:[o.jsx("option",{value:"usuarios",children:e("common:misc.activeUsers")}),o.jsx("option",{value:"fecha",children:e("common:misc.mostRecent")}),o.jsx("option",{value:"nombre",children:e("common:misc.nameAZ")})]})]}),"            ",(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-violet-300 font-medium mb-2",children:["\uD83D\uDC65 ",e("common:misc.status")]}),(0,o.jsxs)("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:j.soloConUsuarios,onChange:e=>b(s=>({...s,soloConUsuarios:e.target.checked})),className:"mr-2 rounded"}),o.jsx("span",{children:e("common:misc.onlyActiveRooms")})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:["            ",[{key:"regiones",label:`🌍 ${e("common:misc.regions")}`,options:["NA","EU","LATAM","BR","KR","JP","OCE","CN","SEA"]},{key:"idiomas",label:`🗣️ ${e("common:misc.languages")}`,options:["Espa\xf1ol","English","Portugu\xeas","Fran\xe7ais","Deutsch","日本語","한국어","中文"]},{key:"paises",label:`🏳️ ${e("common:misc.countries")}`,options:["M\xe9xico","Argentina","Colombia","Espa\xf1a","Chile","Per\xfa","Venezuela","Uruguay","Paraguay","Bolivia","Ecuador"]},{key:"sistemas",label:`💻 ${e("common:misc.systems")}`,options:["PC","PlayStation","Xbox","Nintendo Switch","Mobile"]}].map(({key:e,label:s,options:t})=>(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-violet-300 font-medium mb-2",children:s}),o.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(s=>o.jsx("button",{onClick:()=>N(e,s),className:`px-2 py-1 text-xs rounded transition-colors ${j[e]?.includes(s)?"bg-violet-600 text-white":"bg-neutral-700 text-gray-300 hover:bg-neutral-600"}`,children:s},s))})]},e))]})]}),"      ",(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4 text-sm text-gray-300",children:[(0,o.jsxs)("span",{children:[e("common:misc.showing")," ",l.length," ",e("common:misc.of")," ",s.length," ",e("common:misc.rooms")]}),(0,o.jsxs)("span",{children:[s.filter(e=>e.active_users_count>0).length," ",e("common:misc.activeRooms")]})]}),o.jsx("div",{className:"grid gap-4",children:0===l.length?o.jsx("div",{className:"text-center text-gray-400 py-12",children:0===s.length?(0,o.jsxs)(o.Fragment,{children:[o.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAE"}),o.jsx("h3",{className:"text-xl mb-2",children:e("common:misc.noRoomsCreated")}),o.jsx("p",{className:"mb-4",children:e("common:misc.beFirst")})]}):(0,o.jsxs)(o.Fragment,{children:[o.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),o.jsx("h3",{className:"text-xl mb-2",children:e("common:misc.noRoomsFound")}),o.jsx("p",{className:"mb-4",children:e("common:misc.adjustFilters")})]})}):l.map(s=>(0,o.jsxs)("div",{className:"bg-violet-800/20 border border-violet-500 rounded-xl p-6 hover:bg-violet-800/30 transition-all",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-xl font-bold text-violet-300",children:s.nombre}),(0,o.jsxs)("span",{className:`flex items-center gap-1 text-sm ${_(s.room_status)}`,children:["                      ",y(s.room_status,s.active_users_count),s.active_users_count," ",e("common:misc.users")]})]}),(0,o.jsxs)("p",{className:"text-lg text-white",children:["\uD83C\uDFAE ",s.juego]})]}),(0,o.jsxs)("button",{onClick:()=>D.push(`/room/${s.id}`),className:"bg-violet-600 hover:bg-violet-700 text-white py-2 px-6 rounded-lg transition-colors font-medium",children:["\uD83D\uDEAA ",e("common:misc.enter")]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:["                ",(0,o.jsxs)("div",{children:[(0,o.jsxs)("span",{className:"text-gray-300",children:["\uD83C\uDF0D ",e("common:misc.regions"),":"]}),o.jsx("p",{className:"text-white",children:s.regiones?.join(", ")||e("common:misc.allRegions")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("span",{className:"text-gray-300",children:["\uD83D\uDDE3️ ",e("common:misc.languages"),":"]}),o.jsx("p",{className:"text-white",children:s.idiomas?.join(", ")||e("common:misc.allSystems")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("span",{className:"text-gray-300",children:["\uD83C\uDFF3️ ",e("common:misc.countries"),":"]}),o.jsx("p",{className:"text-white",children:s.paises?.join(", ")||e("common:misc.allSystems")})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("span",{className:"text-gray-300",children:["\uD83D\uDCBB ",e("common:misc.systems"),":"]}),o.jsx("p",{className:"text-white",children:s.sistemas?.join(", ")||e("common:misc.allSystems")})]})]}),"              ",(0,o.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[(0,o.jsxs)("span",{children:[e("common:misc.created"),": ",new Date(s.created_at).toLocaleDateString()]}),s.min_jugadores&&s.max_jugadores&&(0,o.jsxs)("span",{children:["\uD83D\uDC65 ",s.min_jugadores,"-",s.max_jugadores," ",e("common:misc.players")]})]})]},s.id))}),o.jsx("div",{className:"mt-8 text-center",children:(0,o.jsxs)("button",{onClick:()=>D.push("/rooms/create"),className:"bg-violet-600 hover:bg-violet-700 text-white py-4 px-10 rounded-xl transition-colors font-bold text-xl shadow-lg border-2 border-violet-500 hover:border-violet-400",children:["✨ ",e("common:misc.createNewRoom")]})})]})}},7824:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var o=t(9510);let r=(0,t(8570).createProxy)(String.raw`D:\gamer-chat-app\components\EnhancedRoomSearch.tsx#default`);function i(){return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:o.jsx(r,{})})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),o=s.X(0,[202,810],()=>t(3408));module.exports=o})();